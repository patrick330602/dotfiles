"use strict";var filenameSanitize=function(){function a(a,b){for(var c=a.length,d=0,e=-1,f=0;f<c;f++)if(e=a.charCodeAt(f),e>=56320&&e<=57343){if(d++,d>b)return a.substring(0,f-1)}else if(e<=127?d++:e>=128&&e<=2047?d+=2:e>=2048&&e<=65535&&(d+=3),d>b)return a.substring(0,f);return a}function b(b,g,h){var i=b.replace(c,g).replace(d,g).replace(e,g).replace(f,g);return a(i,h)}var c=/[\/\?<>\\:\*\|":~]/g,d=/[\x00-\x1f\x80-\x9f]/g,e=/^\.+$/,f=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i;return function(a,c){var d=c&&c.replacement||"",e=c&&c.max&&c.max<255?c.max:255,f=b(a,d,e);return""===d?f:b(f,"")}}();