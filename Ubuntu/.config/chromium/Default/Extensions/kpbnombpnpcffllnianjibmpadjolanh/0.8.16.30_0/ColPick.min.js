"use strict";!function(a){var b=function(){var b='<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"><div class="colpick_selector_inner"></div></div></div></div></div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"></div><div class="colpick_hue_rarr"></div></div></div><div class="colpick_new_color"></div><div class="colpick_current_color"></div><div class="colpick_hex_field"><div class="colpick_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_h colpick_field"><div class="colpick_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_s colpick_field"><div class="colpick_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_submit"></div></div>',c={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156},d=function(b,c){var d=g(b);a(c).data("colpick").fields.eq(1).val(d.r).end().eq(2).val(d.g).end().eq(3).val(d.b).end()},h=function(b,c){a(c).data("colpick").fields.eq(4).val(Math.round(b.h)).end().eq(5).val(Math.round(b.s)).end().eq(6).val(Math.round(b.b)).end()},j=function(b,c){a(c).data("colpick").fields.eq(0).val(i(b))},k=function(b,c){a(c).data("colpick").selector.css("backgroundColor","#"+i({h:b.h,s:100,b:100})),a(c).data("colpick").selectorIndic.css({left:parseInt(a(c).data("colpick").height*b.s/100,10),top:parseInt(a(c).data("colpick").height*(100-b.b)/100,10)})},l=function(b,c){a(c).data("colpick").hue.css("top",parseInt(a(c).data("colpick").height-a(c).data("colpick").height*b.h/360,10))},m=function(b,c){a(c).data("colpick").currentColor.css("backgroundColor","#"+i(b))},n=function(b,c){a(c).data("colpick").newColor.css("backgroundColor","#"+i(b))},o=function(b){var c=a(this).parent().parent(),m=void 0;this.parentNode.className.indexOf("_hex")>0?(c.data("colpick").color=m=e(G(this.value)),d(m,c.get(0)),h(m,c.get(0))):this.parentNode.className.indexOf("_hsb")>0?(c.data("colpick").color=m=E({h:parseInt(c.data("colpick").fields.eq(4).val(),10),s:parseInt(c.data("colpick").fields.eq(5).val(),10),b:parseInt(c.data("colpick").fields.eq(6).val(),10)}),d(m,c.get(0)),j(m,c.get(0))):(c.data("colpick").color=m=f(F({r:parseInt(c.data("colpick").fields.eq(1).val(),10),g:parseInt(c.data("colpick").fields.eq(2).val(),10),b:parseInt(c.data("colpick").fields.eq(3).val(),10)})),j(m,c.get(0)),h(m,c.get(0))),k(m,c.get(0)),l(m,c.get(0)),n(m,c.get(0)),c.data("colpick").onChange.apply(c.parent(),[m,i(m),g(m),c.data("colpick").el,0])},p=function(b){a(this).parent().removeClass("colpick_focus")},q=function(){a(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus"),a(this).parent().addClass("colpick_focus")},r=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1;var c=a(this).parent().find("input").focus(),d={el:a(this).parent().addClass("colpick_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:b.pageY,field:c,val:parseInt(c.val(),10),preview:a(this).parent().parent().data("colpick").livePreview};a(document).mouseup(d,t),a(document).mousemove(d,s)},s=function(a){return a.data.field.val(Math.max(0,Math.min(a.data.max,parseInt(a.data.val-a.pageY+a.data.y,10)))),a.data.preview&&o.apply(a.data.field.get(0),[!0]),!1},t=function I(b){return o.apply(b.data.field.get(0),[!0]),b.data.el.removeClass("colpick_slider").find("input").focus(),a(document).off("mouseup",I),a(document).off("mousemove",s),!1},u=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1;var c={cal:a(this).parent(),y:a(this).offset().top};a(document).on("mouseup touchend",c,w),a(document).on("mousemove touchmove",c,v);var d="touchstart"===b.type?b.originalEvent.changedTouches[0].pageY:b.pageY;return o.apply(c.cal.data("colpick").fields.eq(4).val(parseInt(360*(c.cal.data("colpick").height-(d-c.y))/c.cal.data("colpick").height,10)).get(0),[c.cal.data("colpick").livePreview]),!1},v=function(a){var b="touchmove"===a.type?a.originalEvent.changedTouches[0].pageY:a.pageY;return o.apply(a.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(a.data.cal.data("colpick").height-Math.max(0,Math.min(a.data.cal.data("colpick").height,b-a.data.y)))/a.data.cal.data("colpick").height,10)).get(0),[a.data.preview]),!1},w=function J(b){return d(b.data.cal.data("colpick").color,b.data.cal.get(0)),j(b.data.cal.data("colpick").color,b.data.cal.get(0)),a(document).off("mouseup touchend",J),a(document).off("mousemove touchmove",v),!1},x=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1;var c={cal:a(this).parent(),pos:a(this).offset()};c.preview=c.cal.data("colpick").livePreview,a(document).on("mouseup touchend",c,z),a(document).on("mousemove touchmove",c,y);var d=void 0,e=void 0;return"touchstart"===b.type?(d=b.originalEvent.changedTouches[0].pageX,e=b.originalEvent.changedTouches[0].pageY):(d=b.pageX,e=b.pageY),o.apply(c.cal.data("colpick").fields.eq(6).val(parseInt(100*(c.cal.data("colpick").height-(e-c.pos.top))/c.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(d-c.pos.left)/c.cal.data("colpick").height,10)).get(0),[c.preview]),!1},y=function(a){var b=void 0,c=void 0;return"touchmove"===a.type?(b=a.originalEvent.changedTouches[0].pageX,c=a.originalEvent.changedTouches[0].pageY):(b=a.pageX,c=a.pageY),o.apply(a.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(a.data.cal.data("colpick").height-Math.max(0,Math.min(a.data.cal.data("colpick").height,c-a.data.pos.top)))/a.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(a.data.cal.data("colpick").height,b-a.data.pos.left))/a.data.cal.data("colpick").height,10)).get(0),[a.data.preview]),!1},z=function K(b){return d(b.data.cal.data("colpick").color,b.data.cal.get(0)),j(b.data.cal.data("colpick").color,b.data.cal.get(0)),a(document).off("mouseup touchend",K),a(document).off("mousemove touchmove",y),!1},A=function(b){var c=a(this).parent(),d=c.data("colpick").color;c.data("colpick").origColor=d,m(d,c.get(0)),c.data("colpick").onSubmit(d,i(d),g(d),c.data("colpick").el)},B=function(b){b.stopPropagation();var c=a("#"+a(this).data("colpickId"));c.data("colpick").onBeforeShow.apply(this,[c.get(0)]);var d=a(this).offset(),e=d.top+this.offsetHeight,f=d.left,g=D(),h=c.width();f+h>g.l+g.w&&(f-=h),c.css({left:f+"px",top:e+"px"}),c.data("colpick").onShow.apply(this,[c.get(0)])!==!1&&c.show(),a("html").mousedown({cal:c},C),c.mousedown(function(a){a.stopPropagation()})},C=function L(b){b.data.cal.data("colpick").onHide.apply(this,[b.data.cal.get(0)])!==!1&&b.data.cal.hide(),a("html").off("mousedown",L)},D=function(){var a="CSS1Compat"===document.compatMode;return{l:window.pageXOffset||(a?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(a?document.documentElement.clientWidth:document.body.clientWidth)}},E=function(a){return{h:Math.min(360,Math.max(0,a.h)),s:Math.min(100,Math.max(0,a.s)),b:Math.min(100,Math.max(0,a.b))}},F=function(a){return{r:Math.min(255,Math.max(0,a.r)),g:Math.min(255,Math.max(0,a.g)),b:Math.min(255,Math.max(0,a.b))}},G=function(a){var b=6-a.length;if(b>0){for(var c=[],d=0;d<b;d++)c.push("0");c.push(a),a=c.join("")}return a},H=function(){var b=a(this).parent(),c=b.data("colpick").origColor;b.data("colpick").color=c,d(c,b.get(0)),j(c,b.get(0)),h(c,b.get(0)),k(c,b.get(0)),l(c,b.get(0)),n(c,b.get(0))};return{init:function(g){if(g=a.extend({},c,g||{}),"string"==typeof g.color)g.color=e(g.color);else if(void 0!==g.color.r&&void 0!==g.color.g&&void 0!==g.color.b)g.color=f(g.color);else{if(void 0===g.color.h||void 0===g.color.s||void 0===g.color.b)return this;g.color=E(g.color)}return this.each(function(){if(!a(this).data("colpickId")){var c=a.extend({},g);c.origColor=g.color;var e="collorpicker_"+parseInt(1e3*Math.random());a(this).data("colpickId",e);var f=a(b).attr("id",e);f.addClass("colpick_"+c.layout+(c.submit?"":" colpick_"+c.layout+"_ns")),"light"!==c.colorScheme&&f.addClass("colpick_"+c.colorScheme),f.find("div.colpick_submit").html(c.submitText).click(A),c.fields=f.find("input").change(o).blur(p).focus(q),f.find("div.colpick_field_arrs").mousedown(r).end().find("div.colpick_current_color").click(H),c.selector=f.find("div.colpick_color").on("mousedown touchstart",x),c.selectorIndic=c.selector.find("div.colpick_selector_outer"),c.el=this,c.hue=f.find("div.colpick_hue_arrs");var i=c.hue.parent(),s=navigator.userAgent.toLowerCase(),t="Microsoft Internet Explorer"===navigator.appName,v=t?parseFloat(s.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,w=t&&v<10,y=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(w){var z=void 0,C=void 0;for(z=0;z<=11;z++)C=a("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+y[z]+", endColorstr="+y[z+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+y[z]+", endColorstr="+y[z+1]+')";'),i.append(C)}else{var D=y.join(",");i.attr("style","background:-webkit-linear-gradient(top,"+D+"); background: -o-linear-gradient(top,"+D+"); background: -ms-linear-gradient(top,"+D+"); background:-moz-linear-gradient(top,"+D+"); -webkit-linear-gradient(top,"+D+"); background:linear-gradient(to bottom,"+D+"); ")}f.find("div.colpick_hue").on("mousedown touchstart",u),c.newColor=f.find("div.colpick_new_color"),c.currentColor=f.find("div.colpick_current_color"),f.data("colpick",c),d(c.color,f.get(0)),h(c.color,f.get(0)),j(c.color,f.get(0)),l(c.color,f.get(0)),k(c.color,f.get(0)),m(c.color,f.get(0)),n(c.color,f.get(0)),c.flat?(f.appendTo(this).show(),f.css({position:"relative",display:"block"})):(f.appendTo(document.body),a(this).on(c.showEvent,B),f.css({position:"absolute"}))}})},showPicker:function(){return this.each(function(){a(this).data("colpickId")&&B.apply(this)})},hidePicker:function(){return this.each(function(){a(this).data("colpickId")&&a("#"+a(this).data("colpickId")).hide()})},setColor:function(b,c){if(c="undefined"==typeof c?1:c,"string"==typeof b)b=e(b);else if(void 0!==b.r&&void 0!==b.g&&void 0!==b.b)b=f(b);else{if(void 0===b.h||void 0===b.s||void 0===b.b)return this;b=E(b)}return this.each(function(){if(a(this).data("colpickId")){var e=a("#"+a(this).data("colpickId"));e.data("colpick").color=b,e.data("colpick").origColor=b,d(b,e.get(0)),h(b,e.get(0)),j(b,e.get(0)),l(b,e.get(0)),k(b,e.get(0)),n(b,e.get(0)),e.data("colpick").onChange.apply(e.parent(),[b,i(b),g(b),e.data("colpick").el,1]),c&&m(b,e.get(0))}})}}}(),c=0,d=function(a){return a=parseInt(a.indexOf("#")>-1?a.substring(1):a,16),{r:a>>16,g:(65280&a)>>8,b:255&a}},e=function(a){return f(d(a))},f=function(a){var b={h:0,s:0,b:0},c=Math.min(a.r,a.g,a.b),d=Math.max(a.r,a.g,a.b),e=d-c;return b.b=d,b.s=0!==d?255*e/d:0,0!==b.s?a.r===d?b.h=(a.g-a.b)/e:a.g===d?b.h=2+(a.b-a.r)/e:b.h=4+(a.r-a.g)/e:b.h=-1,b.h*=60,b.h<0&&(b.h+=360),b.s*=100/255,b.b*=100/255,b},g=function(a){var b={},c=a.h,d=255*a.s/100,e=255*a.b/100;if(0===d)b.r=b.g=b.b=e;else{var f=e,g=(255-d)*e/255,h=(f-g)*(c%60)/60;360===c&&(c=0),c<60?(b.r=f,b.b=g,b.g=g+h):c<120?(b.g=f,b.b=g,b.r=f-h):c<180?(b.g=f,b.r=g,b.b=g+h):c<240?(b.b=f,b.r=g,b.g=f-h):c<300?(b.b=f,b.g=g,b.r=g+h):c<360?(b.r=f,b.g=g,b.b=f-h):(b.r=0,b.g=0,b.b=0)}return{r:Math.round(b.r),g:Math.round(b.g),b:Math.round(b.b)}},h=function(b){return c=[b.r.toString(16),b.g.toString(16),b.b.toString(16)],a.each(c,function(a,b){1===b.length&&(c[a]="0"+b)}),c.join("")},i=function(a){return h(g(a))};a.fn.extend({colpick:b.init,colpickHide:b.hidePicker,colpickShow:b.showPicker,colpickSetColor:b.setColor}),a.extend({colpick:{rgbToHex:h,rgbToHsb:f,hsbToHex:i,hsbToRgb:g,hexToHsb:e,hexToRgb:d}})}(jQuery);